#include <avr/pgmspace.h> // untuk menggunakan progmem
double hasilLDR; 
int voltPin = A0 ; //Voltage reader pin 
const float ADC_TO_MM[1024] PROGMEM = {0.0113537, 0.0226591, 0.0339171, 0.0451279, 0.0562916, 0.0674091, 0.0784801, 0.0895059, 0.100486, 0.111421, 0.122312, 0.133158, 0.143961, 0.15472, 0.165436, 0.17611, 0.18674, 0.197329, 0.207875, 0.218381, 0.228845, 0.239268, 0.249651, 0.259993, 0.270296, 0.280559, 0.290783, 0.300968, 0.311114, 0.321222, 0.331291, 0.341323, 0.351317, 0.361274, 0.371195, 0.381078, 0.390925, 0.400736, 0.41051, 0.42025, 0.429953, 0.439622, 0.449256, 0.458855, 0.46842, 0.477951, 0.487448, 0.496911, 0.506341, 0.515737, 0.525101, 0.534432, 0.543731, 0.552997, 0.562231, 0.571434, 0.580604, 0.589744, 0.598852, 0.607929, 0.616976, 0.625992, 0.634978, 0.643933, 0.652859, 0.661755, 0.670622, 0.679459, 0.688266, 0.697046, 0.705796, 0.714518, 0.723211, 0.731876, 0.740513, 0.749122, 0.757704, 0.766258, 0.774785, 0.783285, 0.791758, 0.800203, 0.808623, 0.817016, 0.825382, 0.833722, 0.842037, 0.850326, 0.858589, 0.866826, 0.875039, 0.883226, 0.891388, 0.899525, 0.907637, 0.915725, 0.923789, 0.931828, 0.939843, 0.947834, 0.955802, 0.963745, 0.971665, 0.979562, 0.987435, 0.995286, 1.00311, 1.01092, 1.0187, 1.02646, 1.03419, 1.04191, 1.0496, 1.05727, 1.06492, 1.07254, 1.08015, 1.08773, 1.09529, 1.10283, 1.11035, 1.11785, 1.12533, 1.13278, 1.14022, 1.14763, 1.15503, 1.1624, 1.16975, 1.17709, 1.1844, 1.19169, 1.19896, 1.20622, 1.21345, 1.22067, 1.22786, 1.23504, 1.24219, 1.24933, 1.25645, 1.26355, 1.27063, 1.27769, 1.28473, 1.29176, 1.29876, 1.30575, 1.31272, 1.31967, 1.3266, 1.33352, 1.34042, 1.3473, 1.35416, 1.361, 1.36783, 1.37464, 1.38143, 1.38821, 1.39497, 1.40171, 1.40843, 1.41514, 1.42183, 1.4285, 1.43516, 1.4418, 1.44842, 1.45503, 1.46162, 1.4682, 1.47476, 1.4813, 1.48783, 1.49434, 1.50083, 1.50731, 1.51377, 1.52022, 1.52665, 1.53307, 1.53947, 1.54586, 1.55223, 1.55859, 1.56493, 1.57125, 1.57756, 1.58386, 1.59014, 1.59641, 1.60266, 1.6089, 1.61512, 1.62133, 1.62752, 1.6337, 1.63987, 1.64602, 1.65215, 1.65828, 1.66439, 1.67048, 1.67656, 1.68263, 1.68868, 1.69472, 1.70075, 1.70676, 1.71276, 1.71875, 1.72472, 1.73068, 1.73663, 1.74256, 1.74848, 1.75438, 1.76028, 1.76616, 1.77203, 1.77788, 1.78372, 1.78955, 1.79537, 1.80117, 1.80696, 1.81274, 1.81851, 1.82426, 1.83, 1.83573, 1.84145, 1.84715, 1.85284, 1.85853, 1.86419, 1.86985, 1.87549, 1.88113, 1.88675, 1.89236, 1.89795, 1.90354, 1.90911, 1.91467, 1.92022, 1.92576, 1.93129, 1.93681, 1.94231, 1.94781, 1.95329, 1.95876, 1.96422, 1.96967, 1.9751, 1.98053, 1.98595, 1.99135, 1.99674, 2.00213, 2.0075, 2.01286, 2.01821, 2.02355, 2.02888, 2.0342, 2.03951, 2.0448, 2.05009, 2.05537, 2.06063, 2.06589, 2.07113, 2.07637, 2.08159, 2.08681, 2.09201, 2.09721, 2.10239, 2.10757, 2.11273, 2.11788, 2.12303, 2.12816, 2.13329, 2.1384, 2.14351, 2.1486, 2.15369, 2.15876, 2.16383, 2.16889, 2.17393, 2.17897, 2.184, 2.18902, 2.19403, 2.19903, 2.20402, 2.209, 2.21397, 2.21893, 2.22389, 2.22883, 2.23377, 2.23869, 2.24361, 2.24852, 2.25342, 2.25831, 2.26319, 2.26806, 2.27292, 2.27778, 2.28262, 2.28746, 2.29229, 2.29711, 2.30192, 2.30672, 2.31152, 2.3163, 2.32108, 2.32584, 2.3306, 2.33535, 2.3401, 2.34483, 2.34956, 2.35427, 2.35898, 2.36368, 2.36838, 2.37306, 2.37774, 2.3824, 2.38706, 2.39172, 2.39636, 2.401, 2.40562, 2.41024, 2.41485, 2.41946, 2.42405, 2.42864, 2.43322, 2.43779, 2.44236, 2.44691, 2.45146, 2.456, 2.46054, 2.46506, 2.46958, 2.47409, 2.47859, 2.48309, 2.48758, 2.49205, 2.49653, 2.50099, 2.50545, 2.5099, 2.51434, 2.51878, 2.52321, 2.52763, 2.53204, 2.53645, 2.54085, 2.54524, 2.54962, 2.554, 2.55837, 2.56273, 2.56709, 2.57144, 2.57578, 2.58011, 2.58444, 2.58876, 2.59307, 2.59738, 2.60168, 2.60597, 2.61026, 2.61454, 2.61881, 2.62308, 2.62733, 2.63159, 2.63583, 2.64007, 2.6443, 2.64853, 2.65275, 2.65696, 2.66116, 2.66536, 2.66955, 2.67374, 2.67792, 2.68209, 2.68625, 2.69041, 2.69457, 2.69871, 2.70285, 2.70698, 2.71111, 2.71523, 2.71935, 2.72345, 2.72756, 2.73165, 2.73574, 2.73982, 2.7439, 2.74797, 2.75203, 2.75609, 2.76014, 2.76419, 2.76823, 2.77226, 2.77629, 2.78031, 2.78433, 2.78834, 2.79234, 2.79634, 2.80033, 2.80431, 2.80829, 2.81227, 2.81624, 2.8202, 2.82415, 2.8281, 2.83205, 2.83599, 2.83992, 2.84385, 2.84777, 2.85168, 2.85559, 2.85949, 2.86339, 2.86729, 2.87117, 2.87505, 2.87893, 2.8828, 2.88666, 2.89052, 2.89438, 2.89822, 2.90207, 2.9059, 2.90973, 2.91356, 2.91738, 2.92119, 2.925, 2.92881, 2.9326, 2.9364, 2.94019, 2.94397, 2.94774, 2.95152, 2.95528, 2.95904, 2.9628, 2.96655, 2.97029, 2.97403, 2.97777, 2.9815, 2.98522, 2.98894, 2.99266, 2.99636, 3.00007, 3.00377, 3.00746, 3.01115, 3.01483, 3.01851, 3.02218, 3.02585, 3.02951, 3.03317, 3.03682, 3.04047, 3.04412, 3.04775, 3.05139, 3.05501, 3.05864, 3.06226, 3.06587, 3.06948, 3.07308, 3.07668, 3.08027, 3.08386, 3.08745, 3.09103, 3.0946, 3.09817, 3.10174, 3.1053, 3.10885, 3.1124, 3.11595, 3.11949, 3.12303, 3.12656, 3.13009, 3.13361, 3.13713, 3.14064, 3.14415, 3.14766, 3.15116, 3.15465, 3.15814, 3.16163, 3.16511, 3.16859, 3.17206, 3.17553, 3.17899, 3.18245, 3.1859, 3.18936, 3.1928, 3.19624, 3.19968, 3.20311, 3.20654, 3.20996, 3.21338, 3.2168, 3.22021, 3.22361, 3.22701, 3.23041, 3.23381, 3.23719, 3.24058, 3.24396, 3.24733, 3.25071, 3.25407, 3.25744, 3.2608, 3.26415, 3.2675, 3.27085, 3.27419, 3.27753, 3.28086, 3.28419, 3.28752, 3.29084, 3.29416, 3.29747, 3.30078, 3.30408, 3.30738, 3.31068, 3.31397, 3.31726, 3.32055, 3.32383, 3.3271, 3.33038, 3.33364, 3.33691, 3.34017, 3.34343, 3.34668, 3.34993, 3.35317, 3.35641, 3.35965, 3.36288, 3.36611, 3.36934, 3.37256, 3.37578, 3.37899, 3.3822, 3.38541, 3.38861, 3.39181, 3.395, 3.39819, 3.40138, 3.40456, 3.40774, 3.41091, 3.41409, 3.41725, 3.42042, 3.42358, 3.42673, 3.42989, 3.43304, 3.43618, 3.43932, 3.44246, 3.4456, 3.44873, 3.45185, 3.45498, 3.4581, 3.46121, 3.46432, 3.46743, 3.47054, 3.47364, 3.47674, 3.47983, 3.48292, 3.48601, 3.48909, 3.49217, 3.49525, 3.49832, 3.50139, 3.50446, 3.50752, 3.51058, 3.51364, 3.51669, 3.51974, 3.52278, 3.52582, 3.52886, 3.5319, 3.53493, 3.53796, 3.54098, 3.544, 3.54702, 3.55003, 3.55304, 3.55605, 3.55905, 3.56205, 3.56505, 3.56805, 3.57104, 3.57402, 3.57701, 3.57999, 3.58296, 3.58594, 3.58891, 3.59188, 3.59484, 3.5978, 3.60076, 3.60371, 3.60666, 3.60961, 3.61255, 3.6155, 3.61843, 3.62137, 3.6243, 3.62723, 3.63015, 3.63307, 3.63599, 3.63891, 3.64182, 3.64473, 3.64764, 3.65054, 3.65344, 3.65633, 3.65923, 3.66212, 3.665, 3.66789, 3.67077, 3.67365, 3.67652, 3.67939, 3.68226, 3.68513, 3.68799, 3.69085, 3.69371, 3.69656, 3.69941, 3.70226, 3.7051, 3.70794, 3.71078, 3.71361, 3.71645, 3.71927, 3.7221, 3.72492, 3.72774, 3.73056, 3.73337, 3.73619, 3.73899, 3.7418, 3.7446, 3.7474, 3.7502, 3.75299, 3.75578, 3.75857, 3.76135, 3.76413, 3.76691, 3.76969, 3.77246, 3.77523, 3.778, 3.78077, 3.78353, 3.78629, 3.78904, 3.79179, 3.79455, 3.79729, 3.80004, 3.80278, 3.80552, 3.80825, 3.81099, 3.81372, 3.81645, 3.81917, 3.82189, 3.82461, 3.82733, 3.83004, 3.83276, 3.83546, 3.83817, 3.84087, 3.84357, 3.84627, 3.84896, 3.85166, 3.85435, 3.85703, 3.85972, 3.8624, 3.86508, 3.86775, 3.87043, 3.8731, 3.87576, 3.87843, 3.88109, 3.88375, 3.88641, 3.88906, 3.89172, 3.89437, 3.89701, 3.89966, 3.9023, 3.90494, 3.90757, 3.91021, 3.91284, 3.91547, 3.91809, 3.92072, 3.92334, 3.92596, 3.92857, 3.93118, 3.93379, 3.9364, 3.93901, 3.94161, 3.94421, 3.94681, 3.9494, 3.952, 3.95459, 3.95718, 3.95976, 3.96234, 3.96492, 3.9675, 3.97008, 3.97265, 3.97522, 3.97779, 3.98035, 3.98292, 3.98548, 3.98803, 3.99059, 3.99314, 3.99569, 3.99824, 4.00079, 4.00333, 4.00587, 4.00841, 4.01095, 4.01348, 4.01601, 4.01854, 4.02107, 4.02359, 4.02611, 4.02863, 4.03115, 4.03367, 4.03618, 4.03869, 4.0412, 4.0437, 4.0462, 4.0487, 4.0512, 4.0537, 4.05619, 4.05868, 4.06117, 4.06366, 4.06614, 4.06863, 4.07111, 4.07358, 4.07606, 4.07853, 4.081, 4.08347, 4.08594, 4.0884, 4.09086, 4.09332, 4.09578, 4.09823, 4.10068, 4.10313, 4.10558, 4.10803, 4.11047, 4.11291, 4.11535, 4.11779, 4.12022, 4.12265, 4.12508, 4.12751, 4.12994, 4.13236, 4.13478, 4.1372, 4.13962, 4.14203, 4.14445, 4.14686, 4.14926, 4.15167, 4.15407, 4.15648, 4.15887, 4.16127, 4.16367, 4.16606, 4.16845, 4.17084, 4.17323, 4.17561, 4.17799, 4.18037, 4.18275, 4.18513, 4.1875, 4.18987, 4.19224, 4.19461, 4.19698, 4.19934, 4.2017, 4.20406, 4.20642, 4.20877, 4.21113, 4.21348, 4.21583, 4.21817, 4.22052, 4.22286, 4.2252, 4.22754, 4.22988, 4.23221, 4.23454, 4.23687, 4.2392, 4.24153, 4.24385, 4.24617, 4.24849, 4.25081, 4.25313, 4.25544, 4.25776, 4.26007, 4.26237, 4.26468, 4.26698, 4.26929, 4.27159, 4.27389, 4.27618, 4.27848, 4.28077, 4.28306, 4.28535, 4.28763, 4.28992, 4.2922, 4.29448, 4.29676, 4.29904, 4.30131, 4.30359, 4.30586, 4.30813, 4.31039, 4.31266, 4.31492, 4.31718, 4.31944, 4.3217, 4.32396, 4.32621, 4.32846, 4.33071, 4.33296, 4.33521, 4.33745, 4.33969, 4.34193, 4.34417, 4.34641, 4.34864, 4.35088, 4.35311, 4.35534, 4.35756, 4.35979, 4.36201, 4.36423, 4.36646, 4.36867, 4.37089, 4.3731, 4.37532, 4.37753, 4.37974, 4.38194, 4.38415, 4.38635, 4.38855, 4.39075, 4.39295, 4.39515, 4.39734, 4.39954, 4.40173, 4.40392, 4.4061, 4.40829, 4.41047, 4.41265, 4.41483, 4.41701, 4.41919, 4.42136, 4.42354, 4.42571, 4.42788, 4.43005, 4.43221, 4.43438}
;
unsigned long currentMillis; 
unsigned long previousMillis;
long interval_TimeAVG = 10; 
int counter = 0 ; 
float nilaiADC ; 
unsigned long rataADC; 
float hasilMM ; 

void setup() {
  // put your setup code here, to run once:
  Serial.begin(9600);
  
}

void loop() {
  
   currentMillis = millis();                                                             // to check the time 
   
   if (currentMillis - previousMillis > interval_TimeAVG ){                                                                                                                                                                                                          
   previousMillis = currentMillis;   //mengenalkan variabel nilaiADC
   nilaiADC += analogRead(voltPin);   //read input pin dalam bit dan menambahnya terus
   counter = counter + 1; 
   if (counter >= 20 ){
   rataADC = nilaiADC/20; 
   Serial.println(rataADC);
   hasilMM = pgm_read_float_near(ADC_TO_MM + rataADC); 
   Serial.print("Tebal kaca adalah : ");Serial.println(hasilMM);
   nilaiADC = 0 ;  
   counter=0; 
   }                  
   }
}
